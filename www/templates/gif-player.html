<!--todo: arreglar estilos inline-->
<!--todo: posibilidad de usar la directiva awesome-slider en lugar del range slider de ionic-->
<!--todo: menu superior derecho con icono de interrogacion para ayuda. Interaccion con las imágenes-->
<ion-view view-title="{{ ::itemMeteo.categoria }}" xmlns:rel="http://www.w3.org/1999/xhtml">
  <ion-content>
    <style>
      div.jsgif > canvas{
        width:100%;
      }
      div.jsgif {
        width:100%;
        top: -3px;
      }
      .btnTransparente {
        background-color:transparent;
      }
      #playControls > tbody > tr > td > a > i {
        font-size: 35px;
      }
      #zoomControls > tbody > tr > td > a > i {
        font-size: 30px;
      }
      table {
        margin: 0 auto;
      }
      @media (min-width: 720px) {
  /*
        div.jsgif > canvas{
          width: 75%;
          margin: 32px auto;
        }
  */
        .card{
          width: 80%;
          margin: 32px auto;
        }
      }
      .zoom-label{
        vertical-align: middle; padding-bottom: 7px; padding-right: 10px;
      }
    </style>

    <!-- imagen ------------------------------------------------------------------------------------------------ -->
    <img id="gif" src="/www/img/loader/6.gif" rel:animated_src="{{ image_data }}"
         rel:auto_play="0" rel:fps="700" ng-click="playPause()" width="100%"/>
    <!-- fin imagen -------------------------------------------------------------------------------------------- -->

    <div class="card">
      <!-- range slider -------------------------------------------------------------------------------------- -->
      <label class="range range-assertive" style="padding: 0 3%;" ng-click="pause()" on-touch="pause()">
        <input id="levelRange" type="range" min="0" max="{{ totalFrames - 1 }}"
             value="{{ currentFrame }}" ng-model="currentFrame" ng-change="irPosicion(currentFrame)"
             style="margin:0"/>
      </label>
      <!-- play controls------------------------------------------------------------------------------------ -->
      <table id="playControls">
        <tr>
          <td>
            <a class="button" ng-click="playPause()" ng-class="{'button-positive': isGifPlaying}">
              <i ng-if="isGifPlaying" class="ion-ios-pause"></i>
              <i ng-if=" ! isGifPlaying" class="ion-ios-play-outline"></i>
            </a>
          </td>
          <td>
            <a class="button" ng-click="backward()"><i class="ion-ios-rewind-outline"></i></a>
          </td>
          <td>
            <a class="button" ng-click="forward()"><i class="ion-ios-fastforward-outline"></i></a>
          </td>
          <td>
            <a class="button" ng-click="restart()"><i class="ion-ios-skipbackward-outline"></i></a>
          </td>
          <td>
            <a class="button" ng-click="end()"><i class="ion-ios-skipforward-outline"></i></a>
          </td>
        </tr>
      </table>
      <!-- info frames ------------------------------------------------------------------------------------------- -->
      <div style="width: 100%;text-align:center;padding-bottom:2px">
        <div>Fotograma: <b style="color:red">
          {{ gifAnimado.get_current_frame() + 1 }}</b> de {{ ::totalFrames }}
        </div>
      </div>
      <!-- fin leyenda ---------------------------------------------------------------------------------------- -->
    </div>

    <!-- card zoom controls ---------------------------------------------------------------------------------------------- -->
    <div class="card">
      <table id="zoomControls">
        <tr>
          <!-- botones de zoom omitidos hasta que se arregle bug en jquery panzoom
          <td>
            <a class="button btnTransparente zoom-out"><i class="ion-ios-minus-outline"></i></a>
          </td>
          <td>
            <a class="button btnTransparente zoom-in"><i class="ion-ios-plus-outline" style=""></i></a>
          </td>
          -->
          <td class="zoom-label">Nivel de zoom: </td>
          <td style="vertical-align: middle;">
            <!--aqui deben aparecer los mismos valores definidos en panzoom ctrl-->
            <input type="range" class="zoom-range" min="1" max="4" step="0.1"/>
          </td>
          <td>
            <a class="button btnTransparente reset"><i class="ion-arrow-expand" style="color:lightgray"></i></a>
          </td>
        </tr>
      </table>
    </div>
    <!-- fin card zoom controls ------------------------------------------------------------------------------------ -->

    <!-- card detalles --------------------------------------------------------------------------------------------- -->
    <div class="card">
        <div class="item item-divider" style="font-size:small">Detalles:</div>
        <div class="item item-text-wrap" style="font-size:small">
          <div><span style="color:green">&bullet; Nombre:</span> {{ ::itemMeteo.nombre}}</div>
          <div><span style="color:green">&bullet; Descripción:</span> {{ ::itemMeteo.descripcion }}</div>
          <div>
            <span style="color:green">&bullet; Fuente:</span>
              <a ng-href="{{ ::itemMeteo.urlFuente }}" target="_blank">{{ ::itemMeteo.fuente}}</a>
            </div>
        </div>
      </div>
     <!-- fin detalles --------------------------------------------------------------------------------------- -->

  </ion-content>
</ion-view>
